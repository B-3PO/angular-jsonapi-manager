<div class="header">
    <div class="header-content">
      Data Manager
    </div>
</div>

<button type="button" ng-click="vm.cancelChanges()" style="padding: 12px; margin: 8px;">Cancel Changes</button>


<div class="data-container" style="background: #EEE">
  <h3>Locations</h3>
  <div ng-repeat="location in vm.locations track by location.id">

    <!-- create location -->
    <div ng-if="$index === 0" style="padding: 6px; margin-top: 12px; margin-bottom: 28px; border: 1px solid #AAA;">
      <div>Create Location</div>
      <div>
        <input ng-model="vm.locationInfo.name" placeholder="name" />
      </div>

      <div>
        <input ng-model="vm.locationInfo.city" placeholder="city" />
      </div>

      <div>
        <input ng-model="vm.locationInfo.state" placeholder="state" />
      </div>
      <button type="button" ng-click="vm.addLocation()">Create</button>
    </div>



    <!-- locations -->
    <button type="button" ng-click="vm.update()">Update</button>
    <button type="button" ng-click="vm.deleteLocation(location.id)">Delete</button>

    <div>{{location.id}}</div>
    <div>
      <label class="set-width-label">Name</label>
      <input ng-model="location.name" />
    </div>

    <div>
      <label class="set-width-label">City</label>
      <input ng-model="location.city" />
    </div>

    <div>
      <label class="set-width-label">State</label>
      <input ng-model="location.state" />
    </div>





    <div style="padding-left: 18px; padding-top: 24px; background: #DDD;">
      <h4 style="margin-bottom: 12px;">People</h4>
      <div ng-repeat="person in location.people track by person.id" style="padding-left:20px; margin-bottom: 20px; border-bottom: 1px solid #CCC;">

        <!-- create person -->
        <div ng-if="$index === 0" style="padding: 6px; margin-top: 12px; margin-bottom: 28px; border: 1px solid #AAA;">
          <div>Create Person</div>
          <div>
            <input ng-model="vm.personInfo.name" placeholder="name" />
          </div>

          <div>
            <input ng-model="vm.personInfo.age" placeholder="age" />
          </div>

          <div>
            <input ng-model="vm.personInfo.email" placeholder="email" />
          </div>
          <button type="button" ng-click="vm.addPerson(location.id)">Create</button>
        </div>



        <!-- persons -->
        <button type="button" ng-click="vm.update()">Update</button>
        <button type="button" ng-click="vm.deletePerson(location.id, person.id)">Delete</button>

        <div>{{location.id}}</div>

        <div>
          <label class="set-width-label">Name</label>
          <input ng-model="person.name" />
        </div>

        <div>
          <label class="set-width-label">Age</label>
          <input ng-model="person.age" />
        </div>

        <div>
          <label class="set-width-label">Email</label>
          <input ng-model="person.email" />
        </div>




        <div style="padding-left: 18px; padding-top: 24px; padding-bottom: 24px; background: #CCC">
          <h4 style="margin-bottom: 0; margin-top: 0;">Job</h4>
          <div style="padding-left:20px">
            <button ng-if="person.job.id === undefined" type="button" ng-click="vm.update()">Create</button>
            <button ng-if="person.job.id !== undefined" type="button" ng-click="vm.update()">Update</button>
            <button type="button" ng-click="vm.deleteJob(person.job.id)">Delete</button>

            <div>{{person.job.id}}</div>

            <div>
              <label class="set-width-label">Title</label>
              <input ng-model="person.job.title" />
            </div>

            <div>
              <label class="set-width-label">Pay</label>
              <input ng-model="person.job.pay" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
